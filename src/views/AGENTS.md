# 视图组件知识库

**生成时间：** 2026-01-23
**评分：** 20 (最高复杂度)

## 概述
包含 7 个页面级 Vue 组件，用于游戏主界面，由 `App.vue` 手动路由管理。

## 快速定位
| 任务 | 位置 | 说明 |
|------|----------|-------|
| **战斗 UI 与逻辑** | `Fight.vue` | ATB 计量条、动画、技能目标选择 |
| **队伍管理** | `Character.vue` | 角色选择、角色列表视图 |
| **主仪表板** | `Home.vue` | 玩家摘要、角色看板 |
| **抽卡/召唤** | `Gacha.vue` | 角色获取 UI |
| **叙事/过场** | `Story.vue` | 故事进度界面 |
| **游戏配置** | `Setting.vue` | 音频、图形和存档选项 |
| **玩家档案**| `User.vue` | 玩家统计和详细信息 |

## 反模式
- **巨型组件**：`Fight.vue`（1361 行）和 `Character.vue`（1348 行）是混合复杂 UI、本地状态和直接 store 突变的超大文件。业务逻辑未正确分离。
- **UI 中的状态逻辑**：核心游戏逻辑（如战斗动作、角色状态变化）与视图组件紧密耦合，难以测试或复用。
- **缺乏组件化**：大段模板未分解为更小的、可复用的组件，导致代码重复和维护性差。

## 约定
- **仅使用 Composition API**：所有组件使用 `<script setup>` 处理逻辑
- **直接 store 集成**：组件与 Pinia stores（`useFightStore`、`useSaveStore`、`useDataStore`）直接且重度交互，用于几乎所有状态
- **无 Vue Router**：组件可见性由根 `App.vue` 中的 `v-if` 指令控制，实际上创建了手动路由系统
- **生命周期钩子用于初始化**：`onMounted` 是从 stores 获取视图所需初始数据的主要钩子
